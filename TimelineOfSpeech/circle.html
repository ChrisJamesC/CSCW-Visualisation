<!DOCTYPE html>
<html>
  <head>
    <title>Time line of Speech: Circle</title>
  </head>
 <body>
  </body>
 <script src="http://d3js.org/d3.v2.js"></script>
 
<script type="text/javascript">

	var maxValTime
	var txtFile = new XMLHttpRequest();

	txtFile.open("GET", "dataFiles/Penguin_EnergyTask.csv", false);
	txtFile.send('');

	if (txtFile.readyState === 4) {
		console.log("ready to parse");
		if (txtFile.status === 200) {
			console.log("file found");
		
			allText = txtFile.responseText; 
			  
			lines = txtFile.responseText.split("\n");
			var lineSplit =[] ;
			for(var i = 1; i<lines.length; i++){
				lineSplit.push(lines[i].split(","));
					
			}
		  
		maxValTime = parseFloat(lineSplit[lineSplit.length-1][0]) +parseFloat(lineSplit[lineSplit.length-1][1]) 
		 
		}	
	}

	var w =3000,
		h = 600;
		
	var svg = d3.select("body").append("svg:svg")
		.attr("width", w)
		.attr("height", h);
		
		function time(d){ return d.time;}
		function tStart(d){return 2*parseFloat(d.tStart)+parseFloat(d.time);}
		
		function subject(d){ return d.subject;}
		function red(){svg.style("fill", "red");}
		function blue(){svg.style("fill", "blue");}
		function pink(){svg.style("fill", "pink");}
		function yellow(){svg.style("fill", "yellow");}
		var yS0 = 30;
		var yS1 = 60;
		var yS2 = 90;
		var yS3 = 120;
		
		
	d3.csv("dataFiles/Penguin_EnergyTask.csv", function(data) { 
		svg.selectAll("circle")
		.data(data)
		.enter().append("circle")
		.attr("cx", tStart)
		.attr("cy", function(d){switch(subject(d))
						{
							case "s0":
							return yS0;
							break;
							case "s1":
							return yS1;
							break;
							case "s2":
							return yS2;
							break;
							case "s3":
							return yS3;
							break;
							default:
							return -300;
							
							break;
						}
						})
		.attr("r", time)
		.style("fill", function(d){switch(subject(d))
						{
							case "s0":
							return "rgba(0, 0, 255, 0.3)";
							break;
							case "s1":
							return "rgba(0, 255, 0, 0.3)";
							break;
							case "s2":
							return "rgba(255, 0, 0, 0.3)";
							break;
							case "s3":
							return "rgba(255,192,203, 0.3)";
							break;
							default:
							return "white";
							break;
						}
						})
		.style("stroke", function(d){switch(subject(d))
						{
							case "s0":
							return "darkblue";
							break;
							case "s1":
							return "darkgreen";
							break;
							case "s2":
							return "darkred";
							break;
							case "s3":
							return "rgb(255,20,147)";
							break;
							default:
							return "white";
							break;
						}
						});
	}); 
  </script>
	
</html>